<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Builder - Patterns</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-14213fa4.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-d959ff8c.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Patterns</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="builder-pattern---lecture-notes"><a class="header" href="#builder-pattern---lecture-notes">Builder Pattern - Lecture Notes</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The <strong>Builder Pattern</strong> is a creational design pattern from the Gang of Four (GoF) that separates the construction of complex objects from their representation. It allows you to construct complex objects step by step, providing flexibility in creating different representations of an object using the same construction process.</p>
<h3 id="main-purpose"><a class="header" href="#main-purpose">Main Purpose</a></h3>
<p>The Builder pattern addresses the problem of complex object instantiation by:</p>
<ul>
<li>Separating object construction logic from the domain model/class itself</li>
<li>Moving instantiation logic to a dedicated builder class</li>
<li>Providing a clean interface for object initialization and modification</li>
<li>Allowing different configurations and variations of object creation</li>
</ul>
<hr>
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<h3 id="the-problem"><a class="header" href="#the-problem">The Problem</a></h3>
<p>When a constructor becomes too complex and we want to separate the instantiation logic from the domain model or class itself, we can extract this responsibility into a separate class that specializes in creating instances.</p>
<p><strong>Key insight</strong>: The Builder is a class dedicated to instantiating another class (or multiple classes).</p>
<h3 id="core-components"><a class="header" href="#core-components">Core Components</a></h3>
<p>The Builder pattern typically involves three main components:</p>
<ol>
<li><strong>Product</strong> - The complex object being built</li>
<li><strong>Builder</strong> - The class responsible for constructing the product</li>
<li><strong>Director</strong> (optional) - Controls the sequence of building steps</li>
</ol>
<p><strong>Important</strong>: The Director is not always required - it’s an optional component that manages the order of construction steps.</p>
<hr>
<h2 id="advantages-of-the-builder-pattern"><a class="header" href="#advantages-of-the-builder-pattern">Advantages of the Builder Pattern</a></h2>
<h3 id="1-separation-of-responsibilities"><a class="header" href="#1-separation-of-responsibilities">1. Separation of Responsibilities</a></h3>
<p>The pattern achieves clear separation of concerns by isolating the construction logic from the business logic of the object being created.</p>
<h3 id="2-flexible-initialization"><a class="header" href="#2-flexible-initialization">2. Flexible Initialization</a></h3>
<p>Through different options and methods, you can create various initialization variants. The initialization process doesn’t have to be linear - it can support multiple alternative configurations.</p>
<h3 id="3-complexity-hiding"><a class="header" href="#3-complexity-hiding">3. Complexity Hiding</a></h3>
<p>If complexity can be hidden and isolated behind the Builder pattern, this is actually beneficial:</p>
<ul>
<li>The complex code can be properly tested in isolation</li>
<li>The main codebase remains clean and simple</li>
<li>Code size increases, but complexity is encapsulated</li>
</ul>
<hr>
<h2 id="disadvantages-of-the-builder-pattern"><a class="header" href="#disadvantages-of-the-builder-pattern">Disadvantages of the Builder Pattern</a></h2>
<h3 id="1-increased-complexity"><a class="header" href="#1-increased-complexity">1. Increased Complexity</a></h3>
<p>Without the Builder pattern there’s already complexity, but adding the pattern introduces additional structural complexity.</p>
<h3 id="2-code-size"><a class="header" href="#2-code-size">2. Code Size</a></h3>
<p>Additional classes need to be created (Director, Builder), which means more code to maintain.</p>
<p><strong>However</strong>: If complexity is properly hidden and isolated, and the code is well-tested, the increased code size becomes less of a concern. The benefits of encapsulation often outweigh the cost.</p>
<hr>
<h2 id="classic-implementation-example"><a class="header" href="#classic-implementation-example">Classic Implementation Example</a></h2>
<h3 id="product-class"><a class="header" href="#product-class">Product Class</a></h3>
<p>The product is the object we want to build. In this example, it has three fields:</p>
<pre><code class="language-javascript">class Product {
  constructor() {
    this.field1 = null;
    this.field2 = null;
    this.field3 = null;
  }
}
</code></pre>
<h3 id="abstract-builder"><a class="header" href="#abstract-builder">Abstract Builder</a></h3>
<p>The abstract builder defines the interface for all concrete builders. In classical implementation, it includes:</p>
<ul>
<li>A constructor that throws an exception (cannot be instantiated directly)</li>
<li>Step methods for building (step1, step2, step3)</li>
<li>CreateInstance method for creating the product instance</li>
<li>GetInstance method for retrieving the finished product</li>
</ul>
<pre><code class="language-javascript">class AbstractBuilder {
  constructor() {
    // Cannot be called directly - throws exception
    throw new Error('Abstract class cannot be instantiated');
  }

  step1() {
    throw new Error('Method must be implemented');
  }

  step2() {
    throw new Error('Method must be implemented');
  }

  step3() {
    throw new Error('Method must be implemented');
  }

  createInstance() {
    throw new Error('Method must be implemented');
  }

  getInstance() {
    throw new Error('Method must be implemented');
  }
}
</code></pre>
<h3 id="concrete-builder"><a class="header" href="#concrete-builder">Concrete Builder</a></h3>
<p>The concrete builder inherits from the abstract builder and implements all methods:</p>
<pre><code class="language-javascript">class ConcreteBuilder extends AbstractBuilder {
  constructor() {
    super(); // This won't throw because we're in subclass
    this.instance = null;
  }

  createInstance() {
    // Creates a new product instance
    this.instance = new Product();
    return this;
  }

  step1() {
    // Initialize field1
    this.instance.field1 = 'value1';
    return this;
  }

  step2() {
    // Initialize field2
    this.instance.field2 = 'value2';
    // Could also:
    // - Establish connections
    // - Set up timeouts
    // - Attach callbacks
    // - Any complex initialization
    return this;
  }

  step3() {
    // Initialize field3
    this.instance.field3 = 'value3';
    return this;
  }

  getInstance() {
    // Returns the finished product
    const result = this.instance;
    this.instance = null; // Reset for next build
    return result;
  }
}
</code></pre>
<h3 id="director"><a class="header" href="#director">Director</a></h3>
<p>The Director manages the sequence of building steps:</p>
<pre><code class="language-javascript">class Director {
  constructor(builder) {
    this.builder = builder;
  }

  create() {
    // Orchestrates the building process
    this.builder.createInstance();
    this.builder.step1();
    this.builder.step2();
    this.builder.step3();
    return this.builder.getInstance();
  }
}
</code></pre>
<h3 id="usage---classic-pattern"><a class="header" href="#usage---classic-pattern">Usage - Classic Pattern</a></h3>
<pre><code class="language-javascript">// Create a concrete builder
const builder = new ConcreteBuilder();

// Pass it to the director
const director = new Director(builder);

// Director executes all steps and returns the product
const product = director.create();

// All complexity is hidden during construction
</code></pre>
<p><strong>Note</strong>: While this follows the classical pattern from books (adapted from Java-style examples), JavaScript offers more flexible alternatives due to first-class functions.</p>
<hr>
<h2 id="modern-javascript-approach"><a class="header" href="#modern-javascript-approach">Modern JavaScript Approach</a></h2>
<h3 id="alternative-without-director"><a class="header" href="#alternative-without-director">Alternative Without Director</a></h3>
<p>In JavaScript, with first-class functions, we can simplify the pattern. Steps can be separate functions or procedures that are called sequentially, then combined in a factory function.</p>
<pre><code class="language-javascript">// Simple factory approach
function createProduct(config) {
  const product = new Product();

  // Apply configuration steps
  if (config.field1) product.field1 = config.field1;
  if (config.field2) product.field2 = config.field2;
  if (config.field3) product.field3 = config.field3;

  return product;
}
</code></pre>
<p>This is often simpler and more idiomatic in JavaScript than the full classical pattern.</p>
<hr>
<h2 id="practical-example-query-builder"><a class="header" href="#practical-example-query-builder">Practical Example: Query Builder</a></h2>
<p>A real-world example that demonstrates the Builder pattern is a SQL Query Builder. This example shows how to construct complex SQL queries step by step.</p>
<h3 id="querybuilder-class"><a class="header" href="#querybuilder-class">QueryBuilder Class</a></h3>
<pre><code class="language-javascript">class QueryBuilder {
  constructor(table) {
    // Initialize options object with table and empty clauses
    this.options = {
      table: table,
      fields: '*',
      where: '',
      order: '',
      limit: ''
    };
  }

  // Method to set WHERE clause
  where(conditions) {
    this.options.where = conditions;
    return this; // Return this for method chaining
  }

  // Method to set ORDER BY clause
  order(field) {
    this.options.order = field;
    return this; // Return this for method chaining
  }

  // Method to set LIMIT clause
  limit(count) {
    this.options.limit = count;
    return this; // Return this for method chaining
  }

  // Build and return the final SQL query
  then(resolve, reject) {
    // Extract all accumulated options
    const { table, fields, where, order, limit } = this.options;

    // Build query parts
    let query = `SELECT ${fields} FROM ${table}`;

    if (where) {
      query += ` WHERE ${where}`;
    }

    if (order) {
      query += ` ORDER BY ${order}`;
    }

    if (limit) {
      query += ` LIMIT ${limit}`;
    }

    // Return the complete query
    // In real implementation, this would execute the query
    resolve(query);
  }
}
</code></pre>
<h3 id="key-features"><a class="header" href="#key-features">Key Features</a></h3>
<p><strong>Method Chaining</strong>: Each method returns <code>this</code>, enabling fluent interface:</p>
<pre><code class="language-javascript">builder.where('country = "UA"').order('population').limit(10);
</code></pre>
<p><strong>Thenable Contract</strong>: The class implements a <code>then</code> method, making it compatible with async/await and Promise chains. This means you can use <code>await</code> before the constructor:</p>
<pre><code class="language-javascript">const result = await new QueryBuilder('cities')
  .where('country = "UA"')
  .order('population')
  .limit(10);
</code></pre>
<h3 id="usage-example---method-chaining"><a class="header" href="#usage-example---method-chaining">Usage Example - Method Chaining</a></h3>
<pre><code class="language-javascript">// Using method chaining syntax
const query = await new QueryBuilder('cities')
  .where('country = "UA" AND type = 1')
  .order('population')
  .limit(10);

// Query built:
// "SELECT * FROM cities WHERE country = "UA" AND type = 1 ORDER BY population LIMIT 10"
</code></pre>
<p><strong>Advantages of chaining</strong>:</p>
<ul>
<li>Clean, readable syntax</li>
<li>Each step is explicit</li>
<li>Flexible - can add or remove steps easily</li>
</ul>
<hr>
<h2 id="adding-a-director-to-query-builder"><a class="header" href="#adding-a-director-to-query-builder">Adding a Director to Query Builder</a></h2>
<p>While method chaining is convenient, sometimes we want to pass all options at once (e.g., when receiving JSON from frontend or reading from a file).</p>
<h3 id="director-for-batch-configuration"><a class="header" href="#director-for-batch-configuration">Director for Batch Configuration</a></h3>
<pre><code class="language-javascript">class QueryDirector {
  constructor(builder, options) {
    this.builder = builder;
    this.options = options;
  }

  build() {
    // Apply all options at once
    const { where, order, limit } = this.options;

    if (where) this.builder.where(where);
    if (order) this.builder.order(order);
    if (limit) this.builder.limit(limit);

    return this.builder;
  }
}
</code></pre>
<h3 id="usage-with-director"><a class="header" href="#usage-with-director">Usage with Director</a></h3>
<pre><code class="language-javascript">// Options object (could come from JSON, file, frontend, etc.)
const options = {
  where: 'country = "UA" AND type = 1',
  order: 'population',
  limit: 10
};

// Create builder
const builder = new QueryBuilder('cities');

// Use director to apply all options
const director = new QueryDirector(builder, options);
const query = await director.build();
</code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Can work with configuration objects</li>
<li>Useful when options come from external sources (JSON, API, files)</li>
<li>Combines well with the chaining approach</li>
</ul>
<hr>
<h2 id="method-chaining-vs-object-configuration"><a class="header" href="#method-chaining-vs-object-configuration">Method Chaining vs Object Configuration</a></h2>
<h3 id="method-chaining-approach"><a class="header" href="#method-chaining-approach">Method Chaining Approach</a></h3>
<pre><code class="language-javascript">const result = await new QueryBuilder('cities')
  .where('country = "UA"')
  .order('population')
  .limit(10);
</code></pre>
<p><strong>Pros</strong>:</p>
<ul>
<li>Very readable and explicit</li>
<li>Fluent, natural syntax</li>
<li>Easy to see the construction steps</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>Not convenient when you already have an options object</li>
<li>Requires writing each method call separately</li>
</ul>
<h3 id="object-configuration-approach"><a class="header" href="#object-configuration-approach">Object Configuration Approach</a></h3>
<pre><code class="language-javascript">const options = {
  table: 'cities',
  where: 'country = "UA"',
  order: 'population',
  limit: 10
};

// Direct initialization or via Director
const result = await buildQuery(options);
</code></pre>
<p><strong>Pros</strong>:</p>
<ul>
<li>Options can come from external sources (JSON, files, frontend)</li>
<li>Easy to store and transmit configurations</li>
<li>More compact for complex configurations</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>Less explicit about the building process</li>
<li>Harder to see the construction steps</li>
</ul>
<h3 id="best-practice-support-both"><a class="header" href="#best-practice-support-both">Best Practice: Support Both</a></h3>
<p>A well-designed builder should support both approaches:</p>
<pre><code class="language-javascript">// Chaining when building step by step
const query1 = await new QueryBuilder('cities')
  .where('country = "UA"')
  .limit(10);

// Object when configuration is already available
const query2 = await new QueryBuilder('cities', options);
</code></pre>
<hr>
<h2 id="typescript-example-classic-builder-pattern"><a class="header" href="#typescript-example-classic-builder-pattern">TypeScript Example: Classic Builder Pattern</a></h2>
<p>Here’s a comprehensive TypeScript implementation showing the full pattern:</p>
<pre><code class="language-typescript">// Product being built
class Product1 {
  public parts: string[] = [];

  public listParts(): void {
    console.log(`Product parts: ${this.parts.join(', ')}\n`);
  }
}

// Builder interface
interface Builder {
  producePartA(): void;
  producePartB(): void;
  producePartC(): void;
}

// Concrete builder implementation
class ConcreteBuilder1 implements Builder {
  private product: Product1;

  constructor() {
    this.reset();
  }

  public reset(): void {
    this.product = new Product1();
  }

  public producePartA(): void {
    this.product.parts.push('PartA1');
  }

  public producePartB(): void {
    this.product.parts.push('PartB1');
  }

  public producePartC(): void {
    this.product.parts.push('PartC1');
  }

  // Return the product and reset for next build
  public getProduct(): Product1 {
    const result = this.product;
    this.reset();
    return result;
  }
}

// Director class
class Director {
  private builder: Builder;

  public setBuilder(builder: Builder): void {
    this.builder = builder;
  }

  // Build minimal product
  public buildMinimalViableProduct(): void {
    this.builder.producePartA();
  }

  // Build full-featured product
  public buildFullFeaturedProduct(): void {
    this.builder.producePartA();
    this.builder.producePartB();
    this.builder.producePartC();
  }
}
</code></pre>
<h3 id="usage-examples"><a class="header" href="#usage-examples">Usage Examples</a></h3>
<pre><code class="language-typescript">// Setup
const director = new Director();
const builder = new ConcreteBuilder1();
director.setBuilder(builder);

// Build minimal product
console.log('Standard basic product:');
director.buildMinimalViableProduct();
builder.getProduct().listParts();
// Output: Product parts: PartA1

// Build full product
console.log('Standard full featured product:');
director.buildFullFeaturedProduct();
builder.getProduct().listParts();
// Output: Product parts: PartA1, PartB1, PartC1

// Custom product (without director)
console.log('Custom product:');
builder.producePartA();
builder.producePartC();
builder.getProduct().listParts();
// Output: Product parts: PartA1, PartC1
</code></pre>
<hr>
<h2 id="real-world-use-cases"><a class="header" href="#real-world-use-cases">Real-World Use Cases</a></h2>
<h3 id="1-http-request-builders"><a class="header" href="#1-http-request-builders">1. HTTP Request Builders</a></h3>
<pre><code class="language-javascript">const request = await new RequestBuilder('https://api.example.com')
  .method('POST')
  .header('Content-Type', 'application/json')
  .body({ user: 'John' })
  .timeout(5000);
</code></pre>
<h3 id="2-documentreport-builders"><a class="header" href="#2-documentreport-builders">2. Document/Report Builders</a></h3>
<pre><code class="language-javascript">const report = new ReportBuilder()
  .title('Monthly Sales Report')
  .section('Summary', summaryData)
  .section('Details', detailsData)
  .footer('Generated: ' + new Date())
  .build();
</code></pre>
<h3 id="3-configuration-builders"><a class="header" href="#3-configuration-builders">3. Configuration Builders</a></h3>
<pre><code class="language-javascript">const config = new ConfigBuilder()
  .database('localhost', 5432)
  .logging('debug')
  .timeout(30000)
  .retries(3)
  .build();
</code></pre>
<h3 id="4-ui-component-builders"><a class="header" href="#4-ui-component-builders">4. UI Component Builders</a></h3>
<pre><code class="language-javascript">const dialog = new DialogBuilder()
  .title('Confirm Action')
  .message('Are you sure?')
  .button('OK', handleOk)
  .button('Cancel', handleCancel)
  .show();
</code></pre>
<hr>
<h2 id="key-takeaways"><a class="header" href="#key-takeaways">Key Takeaways</a></h2>
<ol>
<li>
<p><strong>Purpose</strong>: The Builder pattern separates complex object construction from its representation</p>
</li>
<li>
<p><strong>When to Use</strong>:</p>
<ul>
<li>When constructors become too complex</li>
<li>When you need multiple ways to create an object</li>
<li>When object creation requires many steps</li>
<li>When you want to hide construction complexity</li>
</ul>
</li>
<li>
<p><strong>Components</strong>:</p>
<ul>
<li><strong>Product</strong>: The object being built</li>
<li><strong>Builder</strong>: Constructs the product step by step</li>
<li><strong>Director</strong> (optional): Controls the building sequence</li>
</ul>
</li>
<li>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Encapsulates construction logic</li>
<li>Supports different representations</li>
<li>Provides control over construction process</li>
<li>Enables method chaining for fluent interfaces</li>
</ul>
</li>
<li>
<p><strong>JavaScript Considerations</strong>:</p>
<ul>
<li>First-class functions allow simpler alternatives</li>
<li>Method chaining (<code>return this</code>) creates fluent APIs</li>
<li>Thenable contract enables async/await compatibility</li>
<li>Can support both chaining and object configuration</li>
</ul>
</li>
<li>
<p><strong>Trade-offs</strong>:</p>
<ul>
<li>Increases code size with additional classes</li>
<li>May add complexity to simple cases</li>
<li>Worth it when construction logic is genuinely complex</li>
</ul>
</li>
</ol>
<hr>
<h2 id="common-patterns-with-builder"><a class="header" href="#common-patterns-with-builder">Common Patterns with Builder</a></h2>
<h3 id="fluent-interface-method-chaining"><a class="header" href="#fluent-interface-method-chaining">Fluent Interface (Method Chaining)</a></h3>
<p>Return <code>this</code> from each builder method to enable chaining:</p>
<pre><code class="language-javascript">class FluentBuilder {
  method1() {
    // ... do work
    return this; // Enable chaining
  }

  method2() {
    // ... do work
    return this; // Enable chaining
  }
}

// Usage
const result = new FluentBuilder()
  .method1()
  .method2();
</code></pre>
<h3 id="thenable-pattern"><a class="header" href="#thenable-pattern">Thenable Pattern</a></h3>
<p>Implement <code>then()</code> to make builder work with promises:</p>
<pre><code class="language-javascript">class ThenableBuilder {
  then(resolve, reject) {
    // Build and return final result
    const result = this.build();
    resolve(result);
  }
}

// Usage with await
const result = await new ThenableBuilder().option1().option2();
</code></pre>
<h3 id="reset-pattern"><a class="header" href="#reset-pattern">Reset Pattern</a></h3>
<p>Reset builder state after getting the product for reuse:</p>
<pre><code class="language-javascript">class ReusableBuilder {
  getProduct() {
    const result = this.product;
    this.reset(); // Clear state for next build
    return result;
  }

  reset() {
    this.product = new Product();
  }
}
</code></pre>
<hr>
<h2 id="comparison-with-other-patterns"><a class="header" href="#comparison-with-other-patterns">Comparison with Other Patterns</a></h2>
<h3 id="builder-vs-factory-method"><a class="header" href="#builder-vs-factory-method">Builder vs Factory Method</a></h3>
<ul>
<li><strong>Factory Method</strong>: Creates objects in one step</li>
<li><strong>Builder</strong>: Constructs objects step by step with configuration</li>
</ul>
<h3 id="builder-vs-abstract-factory"><a class="header" href="#builder-vs-abstract-factory">Builder vs Abstract Factory</a></h3>
<ul>
<li><strong>Abstract Factory</strong>: Creates families of related objects</li>
<li><strong>Builder</strong>: Constructs a single complex object with many options</li>
</ul>
<h3 id="builder-vs-prototype"><a class="header" href="#builder-vs-prototype">Builder vs Prototype</a></h3>
<ul>
<li><strong>Prototype</strong>: Clones existing objects</li>
<li><strong>Builder</strong>: Constructs new objects from scratch with specific configuration</li>
</ul>
<hr>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>The Builder pattern is essential when dealing with complex object construction. While the classical implementation involves abstract builders and directors, modern JavaScript allows for more flexible and simpler approaches using:</p>
<ul>
<li>Method chaining for fluent APIs</li>
<li>First-class functions for step composition</li>
<li>Thenable contract for async compatibility</li>
<li>Hybrid approaches supporting both chaining and object configuration</li>
</ul>
<p>The key is to balance between following the pattern formally and adapting it to JavaScript’s strengths, always keeping the code maintainable, testable, and easy to use.</p>
<p><strong>Remember</strong>: Use the Builder pattern when construction logic is genuinely complex. For simple cases, a regular constructor or factory function is often sufficient and more appropriate.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../week3/decomposition-aggregation-composition-lecture-notes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../week3/prototype-pattern-lecture-notes.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../week3/decomposition-aggregation-composition-lecture-notes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../week3/prototype-pattern-lecture-notes.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
